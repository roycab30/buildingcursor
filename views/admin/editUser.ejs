<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit User</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Edit User</h1>
        
        <!-- Display Messages if any -->
        <% if (typeof message !== 'undefined') { %>
            <div class="alert alert-info"><%= message %></div>
        <% } %>
        <% if (typeof error !== 'undefined') { %>
            <div class="alert alert-danger"><%= error %></div>
        <% } %>

        <!-- Edit User Form -->
        <div class="card">
            <div class="card-header">
                <h3>User Information</h3>
            </div>
            <div class="card-body">
                <form action="/admin/users/<%= user.user_id %>/edit" method="POST">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-control" name="first_name" value="<%= user.first_name %>" required>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Last Name</label>
                                <input type="text" class="form-control" name="last_name" value="<%= user.last_name %>" required>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" value="<%= user.email %>" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Phone</label>
                        <input type="tel" class="form-control" name="phone" value="<%= user.phone || '' %>">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Address</label>
                        <input type="text" class="form-control" name="address" value="<%= user.address || '' %>">
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">City</label>
                                <input type="text" class="form-control" name="city" value="<%= user.city || '' %>">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="mb-3">
                                <label class="form-label">Postal Code</label>
                                <input type="text" class="form-control" name="postal_code" value="<%= user.postal_code || '' %>">
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">User Type</label>
                        <select class="form-select" name="user_type" required>
                            <option value="property_owner" <%= user.user_type === 'property_owner' ? 'selected' : '' %>>Property Owner</option>
                            <option value="tradesperson" <%= user.user_type === 'tradesperson' ? 'selected' : '' %>>Tradesperson</option>
                            <option value="admin" <%= user.user_type === 'admin' ? 'selected' : '' %>>Admin</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select class="form-select" name="status" required>
                            <option value="active" <%= user.status === 'active' ? 'selected' : '' %>>Active</option>
                            <option value="inactive" <%= user.status === 'inactive' ? 'selected' : '' %>>Inactive</option>
                            <option value="suspended" <%= user.status === 'suspended' ? 'selected' : '' %>>Suspended</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">New Password (leave blank to keep current)</label>
                        <input type="password" class="form-control" name="password">
                        <small class="text-muted">Only fill this if you want to change the password</small>
                    </div>
                    <input type="hidden" name="updated_at" value="<%= new Date().toISOString() %>">
                    <div class="row">
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary">Update User</button>
                            <a href="/admin/dashboard" class="btn btn-secondary">Back to Dashboard</a>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html> 